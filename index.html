<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inter-process Communication Simulation (IPC)</title>
    
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Space+Grotesk:wght@300;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <div class="brand" style="margin-right: 800px">
            <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="none" style="margin-top: 9px">
                <defs>
                    <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#06b6d4" />
                        <stop offset="100%" stop-color="#8b5cf6" />
                    </linearGradient>
                </defs>
                <path d="M12 8L15.46 10L15.46 14L12 16L8.54 14L8.54 10L12 8Z" stroke="url(#logoGradient)" stroke-width="2" fill="rgba(139, 92, 246, 0.2)"/>
                <path d="M12 8V3 M15.46 14L19 17 M8.54 14L5 17" stroke="url(#logoGradient)" stroke-width="2" stroke-linecap="round"/>
                <circle cx="12" cy="2" r="1.5" fill="url(#logoGradient)"/>
                <circle cx="19" cy="17" r="1.5" fill="url(#logoGradient)"/>
                <circle cx="5" cy="17" r="1.5" fill="url(#logoGradient)"/>
            </svg>
            Message Passing IPC
        </div>

        <div class="controls">
            <button class="btn-icon" onclick="sim.undo()" title="Undo (Ctrl+Z)">⎌</button>
            <button class="btn-icon" onclick="sim.redo()" title="Redo (Ctrl+Y)">↻</button>
            <div style="width:1px; background:var(--border-light); margin: 0 8px;"></div>
            <button class="btn-reset" onclick="sim.reset()">SYSTEM REBOOT</button>
        </div>

        <div class="controls">
            <div style="width:1px; background:var(--border-light); margin: 0 8px;"></div>
            <button class="btn-reset"><a href="SharedMemory/index.html">SHARED MEMORY</a></button>
        </div>

    </header>

    <div class="layout">
        <div class="visual-stack">
            <div class="kernel-space" id="kernelSpace">
                <canvas id="wire-layer"></canvas>
                <div class="kernel-node" id="kernelNode">
                    <div class="kernel-header">KERNEL BUFFER</div>
                    <div class="buffer-container" id="bufferContainer"></div>
                </div>
                <div class="legend">
                    <span><span class="dot" style="background:var(--color-root)"></span>ROOT</span>
                    <span><span class="dot" style="background:var(--color-user)"></span>USER</span>
                    <span><span class="dot" style="background:var(--color-guest)"></span>GUEST</span>
                </div>
            </div>

            <div class="terminal" id="terminal">
                <div class="terminal-header">
                    <div class="t-dot" style="background:#ff5f56"></div>
                    <div class="t-dot" style="background:#ffbd2e"></div>
                    <div class="t-dot" style="background:#27c93f"></div>
                    <span style="margin-left:10px;color:#666">sys.log // ACTIVE</span>
                </div>
                <div class="log-entry log-sys"><span class="log-time">[INIT]</span> Message IPC Kernel v26.1 ...</div>
            </div>
        </div>

        <aside class="sidebar">

            <div class="panel">
                <span class="panel-label">Process Scheduler</span>
                <div class="queue-panel">
                    <div class="queue-box q-ready" id="queue-box">
                        <div class="queue-title">Ready</div>
                        <div class="queue-list" id="qReady"></div>
                    </div>
                    <div class="queue-box q-run">
                        <div class="queue-title">Running</div>
                        <div class="queue-list" id="qRun"></div>
                    </div>
                    <div class="queue-box q-wait">
                        <div class="queue-title">Blocked</div>
                        <div class="queue-list" id="qWait"></div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <span class="panel-label">Process Manager</span>
                <div class="input-group">
                    <select id="spawnType">
                        <option value="root">ROOT (Admin)</option>
                        <option value="user">USER (Standard)</option>
                        <option value="guest">GUEST (Restricted)</option>
                    </select>
                    <button class="btn-add" onclick="sim.spawn()">+</button>
                </div>

                <span class="panel-label">Task Termination</span>
                <div class="input-group" style="margin-bottom:20px;">
                    <select id="killSelect"><option>Select PID...</option></select>
                    <button class="btn-kill" onclick="sim.kill()">Terminate</button>
                </div>

                <div class="routing-grid">
                    <span class="panel-label" style="margin:0; margin-bottom:8px;">Message Routing</span>
                    <select id="senderSelect"><option>Sender...</option></select>
                    <div style="text-align:center; color:var(--border-light); font-size:10px;">▼</div>
                    <select id="receiverSelect"><option>Receiver...</option></select>
                    <div style="margin-top:4px;">
                        <input type="text" id="payloadInput" placeholder="Data Payload (e.g. 0xAF3)" style="width:100%; font-family:var(--font-code);">
                    </div>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 8px;">
                        <button class="btn-action btn-send" onclick="sim.send()">TRANSMIT</button>
                        <button class="btn-action btn-read" onclick="sim.read()">RECEIVE</button>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <script src="script.js"></script>

</body>
</html>
